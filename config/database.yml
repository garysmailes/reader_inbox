default: &default
  adapter: postgresql
  encoding: unicode
  max_connections: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>

development:
  primary: &primary_development
    <<: *default
    database: reader_inbox_development

  # Keep cache in primary unless you explicitly want a separate cache DB
  cache:
    <<: *primary_development
    database: reader_inbox_development

  # Solid Queue uses its own DB + migrations path in development (Option B)
  queue:
    <<: *primary_development
    database: reader_inbox_development_queue
    migrations_paths: db/queue_migrate

  # Solid Cable uses its own DB + migrations path in development (Option B)
  cable:
    <<: *primary_development
    database: reader_inbox_development_cable
    migrations_paths: db/cable_migrate

test:
  primary: &primary_test
    <<: *default
    database: reader_inbox_test

  cache:
    <<: *primary_test
    database: reader_inbox_test

  queue:
    <<: *primary_test
    database: reader_inbox_test_queue
    migrations_paths: db/queue_migrate

  cable:
    <<: *primary_test
    database: reader_inbox_test_cable
    migrations_paths: db/cable_migrate

production:
  primary: &primary_production
    <<: *default
    database: reader_inbox_production
    username: reader_inbox
    password: <%= ENV["READER_INBOX_DATABASE_PASSWORD"] %>

  cache:
    <<: *primary_production
    database: reader_inbox_production_cache
    migrations_paths: db/cache_migrate

  queue:
    <<: *primary_production
    database: reader_inbox_production_queue
    migrations_paths: db/queue_migrate

  cable:
    <<: *primary_production
    database: reader_inbox_production_cable
    migrations_paths: db/cable_migrate
